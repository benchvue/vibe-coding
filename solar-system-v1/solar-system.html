<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>3D Solar System (Textured)</title>

    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: black;
        }

        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 10;
        }

        button {
            padding: 6px 12px;
            margin-right: 4px;
            font-size: 14px;
        }

        /* Label style: larger and clearer */
        .label {
            color: white;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 0 0 6px black;
            pointer-events: none;
            white-space: nowrap;
        }
    </style>

    <script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js"
  }
}
</script>
</head>

<body>

    <div id="ui">
        <button id="play">Play</button>
        <button id="pause">Pause</button>
        <button id="speedDown">Speed âˆ’</button>
        <button id="speedUp">Speed +</button>
    </div>

    <script type="module">
        import * as THREE from "three";
        import { OrbitControls } from
            "https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/controls/OrbitControls.js";
        import { CSS2DRenderer, CSS2DObject } from
            "https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/renderers/CSS2DRenderer.js";

        /* Scene */
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000000);

        /* Camera */
        const camera = new THREE.PerspectiveCamera(60, innerWidth / innerHeight, 1, 5000);
        camera.position.set(0, 350, 600);

        /* Renderers */
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(innerWidth, innerHeight);
        document.body.appendChild(renderer.domElement);

        const labelRenderer = new CSS2DRenderer();
        labelRenderer.setSize(innerWidth, innerHeight);
        labelRenderer.domElement.style.position = "absolute";
        labelRenderer.domElement.style.top = "0";
        document.body.appendChild(labelRenderer.domElement);

        /* Controls */
        const controls = new OrbitControls(camera, labelRenderer.domElement);
        controls.enableDamping = true;

        /* Lights */
        scene.add(new THREE.AmbientLight(0xffffff, 0.3));
        scene.add(new THREE.PointLight(0xffffff, 2.5, 3000));

        /* Grid */
        scene.add(new THREE.GridHelper(2000, 40, 0x444444, 0x222222));

        /* Texture loader */
        const textureLoader = new THREE.TextureLoader();

        /* Textures (local) */
        const textures = {
            sun: "./textures/Sun.png",
            mercury: "./textures/Mercury.png",
            venus: "./textures/Venus.png",
            earth: "./textures/Earth.png",
            mars: "./textures/Mars.png",
            jupiter: "./textures/Jupiter.png",
            saturn: "./textures/Saturn.png",
            uranus: "./textures/Uranus.png",
            neptune: "./textures/Neptune.png"
        };

        /* Sun */
        const sun = new THREE.Mesh(
            new THREE.SphereGeometry(35, 32, 32),
            new THREE.MeshBasicMaterial({
                map: textureLoader.load(textures.sun)
            })
        );
        scene.add(sun);

        /* Planet data */
        const planetData = [
            { name: "Mercury", a: 60, b: 55, size: 4, speed: 0.020, texture: textures.mercury },
            { name: "Venus", a: 90, b: 85, size: 7, speed: 0.015, texture: textures.venus },
            { name: "Earth", a: 130, b: 125, size: 8, speed: 0.010, texture: textures.earth },
            { name: "Mars", a: 170, b: 160, size: 6, speed: 0.008, texture: textures.mars },
            { name: "Jupiter", a: 240, b: 230, size: 16, speed: 0.005, texture: textures.jupiter },
            { name: "Saturn", a: 310, b: 295, size: 14, speed: 0.004, texture: textures.saturn },
            { name: "Uranus", a: 380, b: 365, size: 11, speed: 0.003, texture: textures.uranus },
            { name: "Neptune", a: 450, b: 430, size: 11, speed: 0.002, texture: textures.neptune }
        ];

        let running = true;
        let speedMultiplier = 1.0;
        const planets = [];

        /* Create planets */
        planetData.forEach(p => {
            const curve = new THREE.EllipseCurve(0, 0, p.a, p.b, 0, Math.PI * 2);
            const points = curve.getPoints(200).map(v => new THREE.Vector3(v.x, 0, v.y));

            scene.add(new THREE.Line(
                new THREE.BufferGeometry().setFromPoints(points),
                new THREE.LineBasicMaterial({ color: 0x444444 })
            ));

            const mesh = new THREE.Mesh(
                new THREE.SphereGeometry(p.size, 32, 32),
                new THREE.MeshStandardMaterial({
                    map: textureLoader.load(p.texture)
                })
            );
            scene.add(mesh);

            /* Label below the sphere */
            const div = document.createElement("div");
            div.className = "label";
            div.textContent = p.name;

            const label = new CSS2DObject(div);
            label.position.set(0, -(p.size + 10), 0); // bottom of sphere
            mesh.add(label);

            planets.push({
                mesh,
                angle: Math.random() * Math.PI * 2,
                a: p.a,
                b: p.b,
                baseSpeed: p.speed
            });
        });

        /* UI */
        document.getElementById("play").onclick = () => running = true;
        document.getElementById("pause").onclick = () => running = false;

        document.getElementById("speedUp").onclick = () => {
            speedMultiplier = Math.min(speedMultiplier + 0.2, 5);
        };

        document.getElementById("speedDown").onclick = () => {
            speedMultiplier = Math.max(speedMultiplier - 0.2, 0.1);
        };

        /* Animation */
        function animate() {
            requestAnimationFrame(animate);

            if (running) {
                planets.forEach(p => {
                    p.angle += p.baseSpeed * speedMultiplier;
                    p.mesh.position.set(
                        Math.cos(p.angle) * p.a,
                        0,
                        Math.sin(p.angle) * p.b
                    );
                });
            }

            controls.update();
            renderer.render(scene, camera);
            labelRenderer.render(scene, camera);
        }
        animate();

        /* Resize */
        window.addEventListener("resize", () => {
            const w = innerWidth;
            const h = innerHeight;

            camera.aspect = w / h;
            camera.updateProjectionMatrix();

            controls.target.copy(sun.position);

            camera.position.set(
                0,
                Math.max(300, h * 0.4),
                Math.max(500, w * 0.6)
            );

            controls.update();

            renderer.setSize(w, h);
            labelRenderer.setSize(w, h);
        });
    </script>

</body>

</html>